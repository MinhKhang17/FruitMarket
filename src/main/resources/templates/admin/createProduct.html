<!DOCTYPE html>
<html lang="vi" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Create Product</title>
    <link rel="stylesheet" href="/admin/admin-form.css" />
</head>
<body>
<div class="form-container">
    <!-- Header -->
    <div class="form-header">
        <div class="header-left">
            <h1 class="form-title">
                <span class="title-icon">‚ûï</span>
                Create New Product
            </h1>
            <p class="form-desc">Fill in the details to create a new product</p>
        </div>
        <button class="btn btn-secondary" onclick="window.history.back()">
            <span>‚Üê Back</span>
        </button>
    </div>

    <!-- Form Card -->
    <div class="form-card">
        <form th:action="@{/admin/products/save}"
              th:object="${product}"
              method="post"
              enctype="multipart/form-data"
              class="product-form">

            <!-- Product ID (readonly) -->
            <div class="form-group">
                <label for="id" class="form-label">
                    <span class="label-icon">üî¢</span>
                    Product ID
                </label>
                <input type="text"
                       id="id"
                       th:field="*{id}"
                       class="form-input"
                       placeholder="Auto-generated"
                       readonly/>
                <span class="input-hint">This ID will be auto-generated by the system</span>
            </div>

            <!-- Product Name -->
            <div class="form-group">
                <label for="product_name" class="form-label required">
                    <span class="label-icon">üì¶</span>
                    Product Name
                </label>
                <input type="text"
                       id="product_name"
                       th:field="*{product_name}"
                       class="form-input"
                       placeholder="Enter product name (e.g., Fresh Apple)"
                       required/>
                <span class="input-hint">Give your product a clear and descriptive name</span>
            </div>

            <!-- Product Description -->
            <div class="form-group">
                <label for="product_description" class="form-label">
                    <span class="label-icon">üìù</span>
                    Product Description
                </label>
                <textarea id="product_description"
                          th:field="*{product_description}"
                          class="form-textarea"
                          placeholder="Describe your product in detail..."
                          rows="4"></textarea>
                <span class="input-hint">Provide a detailed description of your product (optional)</span>
            </div>

            <!-- Two columns: Category & Brand -->
            <div class="form-row">
                <!-- Category -->
                <div class="form-group">
                    <label for="category" class="form-label required">
                        <span class="label-icon">üìÇ</span>
                        Category
                    </label>
                    <select id="category"
                            name="categoryId"
                            class="form-select"
                            required>
                        <option value="" disabled selected>-- Select category --</option>
                        <option th:each="c : ${categories}"
                                th:value="${c.id}"
                                th:text="${c.name}">
                            Category Name
                        </option>
                    </select>
                    <span class="input-hint">Choose the product category</span>
                </div>

                <!-- Brand -->
                <div class="form-group">
                    <label for="brand" class="form-label required">
                        <span class="label-icon">üè∑Ô∏è</span>
                        Brand
                    </label>
                    <select id="brand"
                            name="brandId"
                            class="form-select"
                            required>
                        <option value="" disabled selected>-- Select brand --</option>
                        <option th:each="b : ${brands}"
                                th:value="${b.id}"
                                th:text="${b.name}">
                            Brand Name
                        </option>
                    </select>
                    <span class="input-hint">Choose the product brand</span>
                </div>
            </div>

            <!-- Images Upload -->
            <div class="form-group">
                <label for="images" class="form-label">
                    <span class="label-icon">üñºÔ∏è</span>
                    Product Images
                </label>
                <div class="file-upload-wrapper">
                    <input type="file"
                           id="images"
                           name="images"
                           class="file-input"
                           accept="image/*"
                           multiple
                           onchange="previewImages(event)"/>
                    <label for="images" class="file-upload-label">
                        <span class="upload-icon">üì§</span>
                        <span class="upload-text">Click to upload images or drag and drop</span>
                        <span class="upload-hint">PNG, JPG, GIF up to 10MB (Multiple files allowed)</span>
                    </label>
                </div>
                <div id="imagePreview" class="image-preview"></div>
            </div>

            <!-- Submit Buttons -->
            <div class="form-actions">
                <button type="reset" class="btn btn-secondary">
                    <span>üîÑ</span>
                    Reset Form
                </button>
                <button type="submit" class="btn btn-primary">
                    <span>‚ú®</span>
                    Create Product
                </button>
            </div>
        </form>
    </div>
</div>

<script>
    // Image preview function
    function previewImages(event) {
        const preview = document.getElementById('imagePreview');
        preview.innerHTML = '';

        const files = event.target.files;
        if (files.length === 0) return;

        Array.from(files).forEach((file, index) => {
            if (file.type.startsWith('image/')) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    const div = document.createElement('div');
                    div.className = 'preview-item';
                    div.innerHTML = `
                            <img src="${e.target.result}" alt="Preview ${index + 1}">
                            <span class="preview-name">${file.name}</span>
                        `;
                    preview.appendChild(div);
                };
                reader.readAsDataURL(file);
            }
        });
    }
</script>
</body>
</html>